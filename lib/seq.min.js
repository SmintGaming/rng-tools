"use strict";var Stream=function(t,e){e=e||(t instanceof Buffer?8:1);var r,n,a,s="";for(n=0,a=t.length;n<a;n++){for(r=this._get(t,n).toString(2);r.length<e;)r="0"+r;s+=r}s=s.split("").map(function(t){return parseInt(t,2)}),this._bases={2:s}};Stream.prototype.generate=function(t,e,r){e=e||2;var n,a=t,s=Math.ceil(Math.log(t)/Math.log(e)),o=Math.pow(e,s)-t;t:for(;a>=t;){if(n=this._shift(e,s),!n)return r?t:null;if(a=this._evaluate(n,e),a>=t){if(1===o)continue t;this._push(o,a-t),a=this.generate(t,o,!0)}}return a},Stream.prototype._get=function(t,e){return t.readUInt8?t.readUInt8(e):t[e]},Stream.prototype._evaluate=function(t,e){for(var r=0,n=t.length;n--;)r+=t[n]*Math.pow(e,t.length-(n+1));return r},Stream.prototype._push=function(t,e){this._bases[t]=this._bases[t]||[],this._bases[t].push(e)},Stream.prototype._shift=function(t,e){var r=this._bases[t];return!r||r.length<e?null:r.splice(0,e)},module.exports=Stream;